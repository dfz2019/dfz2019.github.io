<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dingfan&#39;s blog</title>
  
  <subtitle>always chasing</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-02-01T18:16:15.354Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Dingfan Zhao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Intermediate Python</title>
    <link href="http://yoursite.com/2019/11/30/intermediate-python/"/>
    <id>http://yoursite.com/2019/11/30/intermediate-python/</id>
    <published>2019-11-30T09:19:36.000Z</published>
    <updated>2020-02-01T18:16:15.354Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.postimg.cc/vBzKnzhB/python-logo.png" alt="python-logo.png"></p><blockquote><p>As all known, there are two versions of Python, Python 2 and Python 3. One suggestion: learn python 3. </p><p>From <a href="https://www.python.org/doc/sunset-python-2/" target="_blank" rel="noopener">Python 2 sunset announcement</a>, it states that 2020/01/01 will be the day to sunset Python 2. During that time, Python 2 will stop maintenance. Time to transfer to Python 3 lah. </p><p>Another suggestion is that pls keep critical thinking. This blog was initially intended to be a self reflection. Hence, bear with me if there are some mistakes through this blog. </p></blockquote><p>Python is a versatile language that can support for multiple purposes. </p><ol><li>scripting </li><li>web development </li><li>ML / AI track </li></ol><p>There are I have seen too many tutorials about Python basics, most of them introduces ML track. However, I will introduce Python in web development track since I am quite proficient in ML/AI track. For those tracks, there are much more tutorials that do better work than me. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This blog will include a lot of code blocks</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"Hello, "</span>, sys.argv[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>This is a simple Python code script that print a sentence with a parameter that you input.<br>The reason that you set <code>__name__ == &#39;__main__&#39;</code> is because you wanna different behaviors between this Python file being executed directly and being imported by other modules. </p><p>For introduction Python tutorial, please refer to reference <a href="https://developers.google.com/edu/python/introduction" target="_blank" rel="noopener">[1]</a>. This blog will assume readers to have such prerequisites. </p><ol><li>Python basic </li><li>CS fundamentals</li></ol><h2 id="general-knowledge"><a href="#general-knowledge" class="headerlink" title="general knowledge:"></a>general knowledge:</h2><p>Python does minimum compile-time check, almost all the check is done in runtime check.  </p><p>python string is immutable, just like string in Java and C#. The reason that string type in Python is immutable is: </p><ol><li>it is safe to put as a dict key without deepcopy the content of string. If assign string to another variable then they do not point to the same object. </li><li>it is threadsafe</li><li>easy for programming, you can add mutable wrapper on immutable type but the reverse is difficult </li></ol><p>Every time we manipulate string, we actually construct brand new string with changes that you made. </p><p>P.S. There is one hidden logic in Python interactive interpreter worth noticing, the single underscore (_) is bounded to the last expression evaluated. For instance: </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">lambda</span> x, y: x * x + y * y</span><br><span class="line">&lt;function &lt;<span class="keyword">lambda</span>&gt; at <span class="number">0x102922e18</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">13</span></span><br></pre></td></tr></table></figure><p>Here the single underscore refers to the lambda function object that I initialised before. There are actually a lot of usages of underscore in python code. Some of them are just conventions and designed as a hint for programmers, while others are enforced by python interpreter. </p><p>Some of the most common usages are as following: </p><ol><li>single underscore: <code>_</code><ul><li>used as a variable name, by convention the value of this variable is not cared</li><li>referred as last object in the interactive python shell, like last function or last variable </li></ul></li><li>single leading underscore: <code>_var</code><ul><li>by convention indicating this variable <code>_var</code> is intended for internal use </li><li>When importing using wildcard (*), functions with leading single underscore will not be imported </li></ul></li><li>single trailing underscore: <code>var_</code><ul><li>used by convention to avoid conflicts with python keywords </li></ul></li><li>double leading underscores: <code>__var</code><ul><li>enforced by python interpreter, trigger name mingling when using in a class. <ul><li>for example, varaible name will append class name in front <code>__var</code> ==&gt; <code>_Class__var</code> while class name does not leading underscores </li></ul></li></ul></li><li>double leading and trailing underscores: <code>__var__</code><ul><li>reserved for python special methods like <code>__init__</code> and <code>__call__</code> </li></ul></li></ol><p>For the full reference of underscore (_), please refer to <a href="https://dbader.org/blog/meaning-of-underscores-in-python" target="_blank" rel="noopener">this blog</a>.  </p><p>One famous feature of Python is its concise syntax. There are some syntactic sugars in python. According to <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank" rel="noopener">Wikipedia</a>, <code>Syntactic sugar</code> is programming syntax that is designed to make code easy to read and understand. One sugar is called <code>decorator</code>. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_decorator</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># do something before actual function</span></span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        <span class="comment"># do something after actual function </span></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">actual_func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># do something </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># similar with </span></span><br><span class="line">my_decorator(actual_func)</span><br></pre></td></tr></table></figure><p>decorator is just normal function in python and it can be used as <code>@</code> + <code>function name</code> to simplify the usage. If the function to be wrapped has some arguments, it can be passed in through <code>*args</code> and <code>**args</code></p><h3 id="python-encoding-amp-decoding"><a href="#python-encoding-amp-decoding" class="headerlink" title="python encoding &amp; decoding"></a>python encoding &amp; decoding</h3><p>The first question, of course, <code>What is encoding/decoding?</code></p><p>According to statement of <a href="https://searchnetworking.techtarget.com/definition/encoding-and-decoding" target="_blank" rel="noopener">this post</a>, </p><blockquote><p>In computers, encoding is the process of putting a sequence of characters (letters, numbers, punctuation, and certain symbols) into a specialized format for efficient transmission or storage. Decoding is the opposite process — the conversion of an encoded format back into the original sequence of characters. </p></blockquote><p>Simply speaking, encoding and decoding is special converting method that converting between bytes and string and bytes to string ==&gt; decode, string to byte ==&gt; encode. After encoding, data format changes to a format (byte) that machine can understand efficiently. After decoding, data fomrat changes to format (string) that human kinds can understand efficiently. </p><p>To construct an unicode string in python 3, add a prefix <code>u</code> in front of the string, like <code>u&#39;\xf1&#39;</code>. </p><p>If encode, then string becomes bytes with specific encoding method like <code>utf-8</code>. <code>UTF</code> stands for <code>Unicode Transformation Format</code>. Since <code>utf-8</code> is more universal and can represent more characters in computer world, most of the applications will use <code>utf-8</code> as default encoding method (especially those application that has Chinese characters)</p><p>For example, this is a small script that I ran in <code>python interactive interpreter</code> to illustrate the basic encoding and decoding process in Python.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>unicode_str = <span class="string">u'\xf1'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>unicode_str</span><br><span class="line"><span class="string">'ñ'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>unicode_str.encode(encoding=<span class="string">'UTF-8'</span>,errors=<span class="string">'strict'</span>)</span><br><span class="line"><span class="string">b'\xc3\xb1'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>utf8_str = unicode_str.encode(encoding=<span class="string">'UTF-8'</span>,errors=<span class="string">'strict'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>utf8_str.decode()</span><br><span class="line"><span class="string">'ñ'</span></span><br></pre></td></tr></table></figure></p><p>Then there is a question, will <code>utf-16</code> use more bytes to encode a char compared to <code>utf-8</code>? what about <code>utf-32</code>?</p><p>The answer is <code>absolutely no</code>. For different characters, <code>utf8</code> and <code>utf16</code> and <code>utf-32</code> will use different number of bits to encode. For instance, <em>U+0000 to U+007F</em> are encoded as 8 bits in <code>utf-8</code>, 16 bits in <code>utf-16</code> and 32 bits in <code>utf-32</code> while <em>U+0800 to U+FFFF</em> requires 24 bits for <code>utf-8</code> but only 16 bits for <code>utf-16</code> and 32 bits for <code>utf-32</code>. </p><p>From the above comparison, <code>utf-8</code> is more efficient than <code>utf-16</code> in smaller unicode indexes, which are used more frequently. Hence, most applications use <code>utf-8</code>. </p><p>Full reference can refer here: <a href="https://docs.python.org/3/howto/unicode.html" target="_blank" rel="noopener">Unicode HOWTO</a> and <a href="https://en.wikipedia.org/wiki/Comparison_of_Unicode_encodings" target="_blank" rel="noopener">Unicode Compare</a></p><h3 id="python-list-tuple-dict-set"><a href="#python-list-tuple-dict-set" class="headerlink" title="python list, tuple, dict, set"></a>python list, tuple, dict, set</h3><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>list is passed by reference, use <code>=</code> does not copy the content of list, only copy the pointer to the object. <code>+</code> works as concatenation between lists. </p><h5 id="pythonic"><a href="#pythonic" class="headerlink" title="pythonic"></a>pythonic</h5><p>list comprehension is the most common <code>pythonic</code> implementation of <code>for</code> loop. According to <a href="https://stackoverflow.com/a/25011492/5891473" target="_blank" rel="noopener">this post</a> and <a href="https://legacy.python.org/dev/peps/pep-0020/" target="_blank" rel="noopener">Zen of Python</a>, </p><blockquote><p>Exploiting the features of the Python language to produce code that is clear, concise and maintainable. </p></blockquote><p>You may understand more about <code>pythonic</code> now. From my own point of view, <code>pythonic</code> is a kind of coding style that the creator of <code>python</code> want programmer to write in. It will make python code concise and clear. </p><h5 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h5><p><code>sorted</code> is the built-in function to sort a list of objects according to a key. By default, the list is sorted by integer value. The key to sort the list can be customized. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">sorted_list = sorted(list) <span class="comment"># default sorting, [1, 2, 3, 4, 6]</span></span><br><span class="line"></span><br><span class="line">descending_sorted_list = sorted(list, reverse=<span class="literal">True</span>) <span class="comment"># [6, 4, 3, 2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">(element)</span>:</span></span><br><span class="line">    <span class="comment"># do some operation of this element</span></span><br><span class="line">    <span class="keyword">return</span> element * <span class="number">0.1</span> <span class="keyword">if</span> element % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> element * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">customized_sorted_list = sorted(list, key=some_func) <span class="comment"># [2, 4, 6, 1, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The some_func can also be implemented by lambda function </span></span><br><span class="line">lambda_sorted_list = sorted(list, key=<span class="keyword">lambda</span> element: element * <span class="number">0.1</span> <span class="keyword">if</span> element % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> element * <span class="number">2</span>) <span class="comment"># [2, 4, 6, 1, 3]</span></span><br></pre></td></tr></table></figure><h5 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h5><p>In the last line of previous code snippet, there is a function called <code>lambda</code>. For example, </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x: x * x + <span class="number">1</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># same as the normal function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x * x + <span class="number">1</span></span><br></pre></td></tr></table></figure><p>lambda function is an anonymous function which do not need to state the name of the function. A lambda function contains three components, the keyword (<code>lambda</code>), the function input variable (<code>x</code>) and the statement (<code>x * x + 1</code>). Python lambda function only allows one statement and the result of the statement will be returned as the result of the lambda function. You don’t need to specify the <code>return</code> keyword because hidden logic of lambda statement is to return the value. </p><p>According to <a href="https://realpython.com/python-lambda/#anonymous-functions" target="_blank" rel="noopener">Real Python post</a>,</p><blockquote><p>Lambda functions are frequently used with higher-order functions, which take one or more functions as arguments or return one or more functions. </p></blockquote><p>More specifically speaking, when a function needs to take one function as its argument, we don’t need to write the function body separately, we can use lambda function to take place. The <code>higher-order functions</code> are mentioned in the next section. </p><h5 id="Advanced-usage-map-filter-reduce"><a href="#Advanced-usage-map-filter-reduce" class="headerlink" title="Advanced usage - map/filter/reduce"></a>Advanced usage - map/filter/reduce</h5><p>There are some advanced usages of <code>list</code> in python. These are <code>higher-order functions</code> mentioned in the previous section. These higher order functions are used to conveniently manipulate elements in the list and output some response.</p><h6 id="map"><a href="#map" class="headerlink" title="map"></a>map</h6><p>For map, it is used to execute a function to every element in the list (Actually may not be a list, just an iterable). For example, we would like to achieve the effect of make every element to attach a string <code>happy</code> in the end, we can do it using <code>map</code> function. <code>map</code> is so-called <code>higher-order function</code> since it takes functions as its arguments. The first argument of <code>map</code> is the function (we call it <code>exe</code>) that we would like to execute and the following arguments are iterables of arguments of <code>exe</code>. Each time of <code>map(exe, list_of_a, list_of_b)</code>, <code>exe(a, b)</code> will execute be executed and return the result. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>input = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = list(map(<span class="keyword">lambda</span> x: str(x) + <span class="string">'happy'</span>, input))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">[<span class="string">'1happy'</span>, <span class="string">'2happy'</span>, <span class="string">'3happy'</span>, <span class="string">'4happy'</span>, <span class="string">'5happy'</span>, <span class="string">'6happy'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = list(map(<span class="keyword">lambda</span> x, y: str(x) + str(y), input, range(<span class="number">1</span>, <span class="number">7</span>)))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">[<span class="string">'11'</span>, <span class="string">'22'</span>, <span class="string">'33'</span>, <span class="string">'44'</span>, <span class="string">'55'</span>, <span class="string">'66'</span>]</span><br></pre></td></tr></table></figure><p>Note that this function is not in place, which means that the function will not change the value of original list. Rather, it will assign value to another list. </p><h5 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h5><p><code>filter</code> is a function used quite frequently in list manipulation. Nomally it will setup some filtering function and return a sublist of the list according to the filter. For example, you wanna find all the elements meeting the lower bound, you would do something like this:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = list(filter(<span class="keyword">lambda</span> x: x &gt; <span class="number">3</span>, input))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><br>It will filter out elements less than 3. The <code>filter</code> function has the same mechanism with <code>map</code>. One thing special for <code>filter</code> is that it requires the return value of its first argument function to be boolean to judge whether to put it into returned sublist. </p><h5 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h5><p><code>reduce</code> is to apply function to adjacent elements cumulatively in the list and return the final result. The returned value of <code>reduce</code> is a single value. Notice that <code>reduce</code> is not import by default, you need to explicitly import it from <code>functools</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line">input = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">initial_val = <span class="number">10</span></span><br><span class="line">res = reduce(<span class="keyword">lambda</span> x, y: x^y, input, initial_val) <span class="comment"># res = 13</span></span><br></pre></td></tr></table></figure><br>This reduce function computes the XOR result of all elements of <code>input</code> plus the initial value, so the reduce function can be explained as <code>10 ^ 1 ^ 2 ^ 3 ^ 4 ^ 5 ^ 6</code>, which is 13. </p><h4 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h4><blockquote><p>A tuple is a fixed size grouping of elements, such as an (x, y) co-ordinate. </p></blockquote><p>According to Google python tutorial, <code>tuple</code> is immutable. <code>Immutable</code> means once the variable is assigned some value, it cannot be modified anymore.<br>The tuple can be created by using <code>tuple((tuple_itself))</code> or just simply <code>()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tuple_sample = (<span class="number">1</span>, <span class="string">'string'</span>, <span class="number">2.3</span>)</span><br><span class="line">tuple_sample = tuple((<span class="number">1</span>, <span class="string">'string'</span>, <span class="number">2.3</span>)) <span class="comment"># effect same as above</span></span><br><span class="line">tuple_sample[<span class="number">1</span>] = <span class="string">'another_str'</span></span><br></pre></td></tr></table></figure><p>Once someone tries to modify tuple value like above, exception will pop up. </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">TypeError: &apos;tuple&apos; object does not support item assignment</span><br></pre></td></tr></table></figure><p>According to <a href="https://appdividend.com/2019/01/05/python-tuple-example-tutorial-complete-introduction-on-tuples/" target="_blank" rel="noopener">tutorial of Python tuple</a>, there are some operations allowed to operate on Python tuple: </p><div class="table-container"><table><thead><tr><th>Allowed operation</th><th>Python expression</th></tr></thead><tbody><tr><td>find the length</td><td>len(tuple_name)</td></tr><tr><td>concatenate</td><td>tuple + tuple</td></tr><tr><td>repetition</td><td>tuple * times</td></tr><tr><td>check if inside</td><td>if ele in tuple</td></tr><tr><td>Iteration</td><td>for ele in tuple:</td></tr><tr><td>nesting</td><td>tuple_total = (tuple1, tuple2)</td></tr></tbody></table></div><p>Another property that can be derived from the immutability of <code>tuple</code> is that it is hashable and as a result it can be used as key of <code>dict</code>. The reason is that if it is used as key of <code>dict</code>, the value of the key itself is passed by reference, which means if the <code>dict</code> key is confirmed, it is not supposed to be changed anymore. If it is a <code>list</code>, it will have the risk to change its value, the hashing algorithm of <code>dict</code> will gonna change its source value. Hence, <code>list</code> is not hashable. </p><h4 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h4><p><code>dict</code> is a kind of data structure that contains key-value pairs. Full name is <code>Dictionary</code> in python. It has similar mechaism with <code>HashMap</code> in java. This kind of framework is often used when efficient searching is required and ordering is not strictly required. It does not need to loop through the whole data to find the data with specific key, since it can find the data according to its hash key. </p><p><code>dict</code> in python is thread safe, which is a quite important feature when it supports multi-thread application in python. </p><p><code>OrderedDict()</code> preserves the order of entry insertion. When loop through the dict, the order is the same as the insertion order. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_dict = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_dict[(<span class="number">1</span>,<span class="number">2</span>)] = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_dict</span><br><span class="line">&#123;(<span class="number">1</span>, <span class="number">2</span>): [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_dict[[<span class="number">1</span>,<span class="number">2</span>]] = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unhashable type: <span class="string">'list'</span></span><br></pre></td></tr></table></figure><p>For simple example above, <code>my_dict = {}</code> initialises a dictionary with empty key-value pair. When you wanna add key-value pairs into the dictionary, simply use <code>my_dict[key] = value</code>. The key’s data type has to be hashable since the dictionary need to compute the hash code of input key to efficient store it. As introduced in last section, <code>tuple</code> can be used as dict key and <code>list</code> cannot be used as dict key since <code>tuple</code> is hashable and <code>list</code> is not hashable. This also reflects when serialization and deserialization of JSON structure is used. One direct method to check whether it is hashable is to check whether it has the <code>__hash__</code> method. This method is used to give a hash value to an object. </p><p>However, we cannot simply say <code>tuple</code> is hashable because it is quite flexible and its elements may be unhashable data types. </p><h5 id="hash-function"><a href="#hash-function" class="headerlink" title="hash function"></a>hash function</h5><p>According to <a href="https://en.wikipedia.org/wiki/Hash_function" target="_blank" rel="noopener">wikipedia hash function</a>, </p><blockquote><p>hash function is a kind of algorithm that can be used to map data of arbitrary size to fixed-size values. The values are used to index a fixed-size table called hash table. </p></blockquote><p>To interpret this, we have to know that hash table is used to efficiently retrieve data from a chunk of data. The reason is that it makes unordered list become in-order in the underneath implementation. The hash function will convert different data types into valid array index and use constant time to find the corresponding values. </p><p>The complete list of data types <strong>not</strong> available to be dictionary key: </p><ul><li>list </li><li>dict</li><li>set </li><li>tuple with above elements </li></ul><p>Basically if a data type is not list / dict / set or tuple with those elements, it is hashable. </p><p><code>consistent hashing</code> is another topic, I will mention it in blog of distributed system if I have that blog. </p><h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p>set in python is implemented in hash also. </p><h3 id="multithread"><a href="#multithread" class="headerlink" title="multithread"></a>multithread</h3><p><code>Multithread</code> is to execute a program using different threads, access one common resource from different places and push or pull its content into the resource. </p><p>A thread contains:</p><ul><li>thread ID </li><li>program counter </li><li>register set </li><li>stack </li></ul><p>The program counter of thread is used to record the next instruction to execute in the program. Register set is used to record value of variable in memory. Register set has the fastest access speed among the methods of saving variables (like cache and hard drive). Stack is used to store the local primitive variables and reference to objects in heap. Every thread has its own stack. </p><p>Multiple threads shares code section, data section and any operating resource that need to be accessed by different threads. </p><h4 id="GIL"><a href="#GIL" class="headerlink" title="GIL"></a>GIL</h4><p>There is a mechanism in python called <code>GIL(Global Interpreter Lock)</code> if we assume that underline implementation of Python is <code>CPython</code> (Cpython is the default interpreter of Python, it will translate Python code to byte code). </p><p>According to <a href="https://wiki.python.org/moin/GlobalInterpreterLock" target="_blank" rel="noopener">Python Wiki</a>, </p><blockquote><p>In CPython, the global interpreter lock, or GIL, is a mutex that protects access to Python objects, preventing multiple threads from executing Python bytecodes at once. </p></blockquote><p>This statement states that only one active thread is allowed during the whole context of Python program. Even if the CPU running python program has multiple cores, it will be blocked by the <code>mutex</code> if the processes are not fully separated.   </p><p>Because of this constraint, the native multithreading in python is not actually parallel. </p><p>Then the question comes, why we still need <code>Threading</code> module with the constraint of <code>GIL</code>? It will be explained in next section. </p><h4 id="Concurrency-and-Parallelism"><a href="#Concurrency-and-Parallelism" class="headerlink" title="Concurrency and Parallelism"></a>Concurrency and Parallelism</h4><p>Before introducing the tricks, I would like to introduce some fundamental concepts related to <code>multithread</code> first. Although some of the concepts may not quite related to Python, it is still good to know. </p><p>When we talk about multi-threading and multi processing, what we really want to achieve is actually concurrency and parallelism. </p><p>According to <a href="https://learn-gevent-socketio.readthedocs.io/en/latest/general_concepts.html" target="_blank" rel="noopener">this blog</a>, </p><ul><li>concurrency: managing access to shared state from different threads, like scenario of most web applications </li><li>parallelism: utilising multiple processors / cores to improve the performance </li></ul><p>So let’s say concurrency is used to manage different clinets accessing one server. Since server has only one program running, this program need to accept accesses from different clients, they use multithreading to achieve this. Parallelism is used to improve performance by fully utilizing the processors to improve the overall performance. </p><p>After knowing those basic concepts and the GIL in python, you may raise a question: Why we still need multi-threading in python since it cannot improve the performance? </p><p>For different scenarios, there are different kinds of bottlenecks. Mainly there are two kinds of bottlenecks, IO/network bottleneck or computational power bottleneck. Python multithreading can solve IO bottleneck (like webserver) by allowing a lot of traffic accessing same server. For CPU-bound program, it will not help since only one active thread is working at the same time. </p><p>However, python can still achieve parallelism by using multi-processing. </p><h4 id="gevent-vs-greenlet-vs-threading"><a href="#gevent-vs-greenlet-vs-threading" class="headerlink" title="gevent vs greenlet vs threading"></a>gevent vs greenlet vs threading</h4><p>According to <a href="https://learn-gevent-socketio.readthedocs.io/en/latest/gevent.html" target="_blank" rel="noopener">the next section of the blog</a>, it states the relationship between gevent and greenlet </p><blockquote><p>Greenlets are a lightweight cooperative threads that are managed and scheduled inside the process. </p></blockquote><p><code>Greenlets</code> is different from conventional thread in python in these aspects:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for POSIX thread (pthread):</span><br><span class="line">* pthreads can switch between threads pre-emptively, switching control from a running thread to a non-running thread at any time</span><br><span class="line">* On multicore machines, pthreads can run more than one thread. However python’s Global Interpreter Lock (CPython Intepreter) prevents parallelism and concurrency is only effective for I/O-bound programs</span><br><span class="line">* Race conditions can occur when implementing multi-threading code. Use locks to manage mutex to avoid race conditions.</span><br><span class="line"></span><br><span class="line">for greenlets: </span><br><span class="line">* greenlets only switch when control is explicitly given up by a thread - when using yield() or wait() - or when a thread performs a I/O blocking operation such as read or write</span><br><span class="line">* greenlets can only run on one single CPU and is useful for I/O-bound programs</span><br><span class="line">* There’s no possibility of two threads of control accessing the same shared memory at the same time for greenlets so there will not be any race conditions.</span><br></pre></td></tr></table></figure><p>From the above paragraph, it is obvious that greenlets can let program take full control of multithreading, it will not be interrupted but only switch to another thread when calling yield() or wait(). Moreover, both of these two approaches (greenlets and native thread) do not bypass the GIL but only achieve concurrency. </p><p>According to <a href="http://www.gevent.org/intro.html" target="_blank" rel="noopener">Gevent official doc</a>, </p><p>If you regard <code>greenlets</code> as a thread, <code>gevent</code> is used to control the greenlets to execute in certain order. </p><p>Gevent monkey patch is to change program behaviour without changing source code. It will use gevent to replace the native python threading module. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gevent.monkey; gevent.monkey.patch_thread()</span><br><span class="line"><span class="keyword">import</span> threading</span><br></pre></td></tr></table></figure><h2 id="scripting-track-requests-beautifulsoup-Pandas-Selenium"><a href="#scripting-track-requests-beautifulsoup-Pandas-Selenium" class="headerlink" title="scripting track: requests + beautifulsoup + Pandas + Selenium(?)"></a>scripting track: requests + beautifulsoup + Pandas + Selenium(?)</h2><p>I am not quite familiar with web crawling track. This track most focuses on getting massive information from websites and do data analysis based on that. </p><h2 id="web-development-track-Django"><a href="#web-development-track-Django" class="headerlink" title="web development track: Django"></a>web development track: Django</h2><p>There will be another blog specifically talking about this topic. Because of limitation of length, I will not introduce details about Django. </p><h2 id="ML-AI-track"><a href="#ML-AI-track" class="headerlink" title="ML / AI track"></a>ML / AI track</h2><p>I am not quite familiar with AI track since I only did some tiny tutorials that can be found on Internet. Further tutorials can be found everywhere else since machine learning is super hot these days. But as for me, I would concentrate on software development to make it more reliable. </p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h2><ol><li><a href="https://developers.google.com/edu/python/introduction" target="_blank" rel="noopener">Google Python Tutorials</a></li><li><a href="https://www.python.org/dev/peps/pep-0008/" target="_blank" rel="noopener">https://www.python.org/dev/peps/pep-0008/</a></li><li><a href="https://docs.python.org/3/library/" target="_blank" rel="noopener">https://docs.python.org/3/library/</a></li><li><a href="https://stackoverflow.com/questions/8680080/why-are-python-strings-immutable-best-practices-for-using-them" target="_blank" rel="noopener">https://stackoverflow.com/questions/8680080/why-are-python-strings-immutable-best-practices-for-using-them</a></li><li><a href="https://docs.python.org/3/howto/unicode.html" target="_blank" rel="noopener">https://docs.python.org/3/howto/unicode.html</a></li><li><a href="https://realpython.com/" target="_blank" rel="noopener">https://realpython.com/</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://i.postimg.cc/vBzKnzhB/python-logo.png&quot; alt=&quot;python-logo.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As all known, there are two versions 
      
    
    </summary>
    
    
      <category term="programming-language" scheme="http://yoursite.com/categories/programming-language/"/>
    
    
      <category term="programming-language" scheme="http://yoursite.com/tags/programming-language/"/>
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Git Cheatsheet</title>
    <link href="http://yoursite.com/2019/11/12/git-cheatsheet/"/>
    <id>http://yoursite.com/2019/11/12/git-cheatsheet/</id>
    <published>2019-11-11T16:58:27.000Z</published>
    <updated>2019-12-07T15:20:08.115Z</updated>
    
    <content type="html"><![CDATA[<h3 id="首篇blog献给我最最最喜欢的小梁！"><a href="#首篇blog献给我最最最喜欢的小梁！" class="headerlink" title="首篇blog献给我最最最喜欢的小梁！"></a>首篇blog献给我最最最喜欢的小梁！</h3><p><br></p><blockquote><p>工欲善其事，必先利其器。</p></blockquote><p>Since this blog does not go through sufficient polishing period, there might be some mistakes or some outdated content, feel free to contact me for any <code>bug</code> you find. Thanks in advance! Another issue is that some naming convention is not quite consistent throughout this blog because this is my first time to write English blog. </p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Git is a version control system used to facilitate the collaboration between multiple developers by using version control (everyone can controls their version to make sure all the features can be developed concurrently).  </p><p>If you are not familiar with basic operations of Git, then probably you can search for <code>git book</code> to learn more about Git basics. This blog will focus on the tricks and problems during my usage of Git in my daily work. </p><p>You may notice that several commands appear several times in different sections, this is the expected behavior since those commands will function differently with different arguments. The <code>Git commands</code> part will introduce commands by functions, hence some commands might be diverged into different parts. </p><p>I would like to There are three kinds of changes in local environment. </p><ol><li>changes in the staging area (changes to be committed in next commit) (added into <code>index</code>)</li><li>changes not in the staging area but still tracked</li><li>changes not tracked or ignored </li></ol><h2 id="Memo-first"><a href="#Memo-first" class="headerlink" title="Memo first"></a>Memo first</h2><ul><li>words in <code>&lt;&gt;</code> is variable name</li><li>phrase in <code>this format</code> and start with <code>git</code> are command and its parameters </li><li><code>&lt;remote-name&gt;</code> for example: origin</li><li><code>&lt;branch-name&gt;</code> / <code>&lt;local-branch-name&gt;</code> / <code>&lt;remote-branch-name&gt;</code>: master</li></ul><h2 id="Git-commands"><a href="#Git-commands" class="headerlink" title="Git commands"></a>Git commands</h2><h3 id="Simple-execution-normal-execution"><a href="#Simple-execution-normal-execution" class="headerlink" title="Simple execution (normal execution)"></a>Simple execution (normal execution)</h3><h4 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h4><h4 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h4><h4 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h4><ul><li><code>-a</code>: stage all the tracked files</li><li><code>-m</code>: attach the commit message in commit command, no need to enter text editor to type commit msg</li></ul><h4 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h4><ul><li>no arguments: the file will go away and not tracked</li><li><code>--cached</code>: still keep the file in hard drive but not have Git track </li></ul><h4 id="git-mv-seldomly-used"><a href="#git-mv-seldomly-used" class="headerlink" title="git mv: seldomly used"></a>git mv: seldomly used</h4><h4 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h4><ul><li>no arguments: switch to an existing branch</li><li><code>-b</code>: switch to a new local branch with same file status of current branch </li></ul><h4 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h4><ul><li><code>-a &lt;tag-name&gt; -m &lt;tagging-msg&gt;</code>: create a tag with tagging msg</li><li><code>&lt;tag-name&gt;</code>: short command </li></ul><h4 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h4><ul><li><code>--global alias.&lt;alias-name&gt; &lt;command-name&gt;</code>: create alias for one command<br>  For example, <code>$ git config --global alias.last &#39;log -1 HEAD&#39;</code> will set <code>git last</code> to perform as <code>git log -1 HEAD</code></li><li><code>--global pull.rebase true / false</code>: <code>true</code> will set the default pull method to <code>rebase</code> while <code>false</code> will set to <code>merge</code></li></ul><h4 id="git-clean"><a href="#git-clean" class="headerlink" title="git clean"></a>git clean</h4><ul><li><code>-df</code>: remove all the files that are untracked</li></ul><h4 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h4><ul><li>no arguments / <code>push</code>: push tracked changes that are not yet ready to commit into stash stack </li><li><code>list</code>: view the list of stash</li><li><code>apply</code> / <code>apply stash{&lt;version-number&gt;}</code>: apply changes that you stashed into stack previously or some older version specified by <code>&lt;version-number&gt;</code></li><li><code>apply --index</code>: only reapply staged changes. </li><li><code>pop</code>: apply changes and pop the saved changes out from stash stack</li></ul><p>Actually there are some cases that you may make the changes in one branch and want those changes to take effect in another branch. <code>git stash</code> is a command for you. </p><h3 id="Checking-local-status"><a href="#Checking-local-status" class="headerlink" title="Checking local status"></a>Checking local status</h3><p>This part is like GET request in HTTP perspective, it will not do any changes to the file status, it will only check status </p><h4 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h4><h4 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h4><ul><li>no arguments: see changes not yet staged</li><li><code>--staged</code> / <code>--cached</code>: staged changes that will go into last commit </li></ul><h4 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h4><ul><li>no arguments: display history only with commit msg and hash in reverse chronological order </li><li><code>--graph</code>: display branch and merge history in graph (tree)</li><li><code>--patch / -p</code>: display history with file change summary</li><li><code>-{number}</code>: display <code>number</code> logs</li><li><code>--stat</code>: display history with brief summary</li><li><code>--pretty={format}</code>: pre built-in format or customized format defined by us </li></ul><h4 id="git-tag-1"><a href="#git-tag-1" class="headerlink" title="git tag"></a>git tag</h4><ul><li>no arguments: list specific points in a repo’s history </li><li><code>-l &lt;tag-sub-name&gt;</code>: filter according to tag name </li></ul><h4 id="git-show"><a href="#git-show" class="headerlink" title="git show"></a>git show</h4><ul><li><code>&lt;tag-name&gt;</code>: show tag with commits </li></ul><h3 id="Error-handling-undo-after-abnormal-execution"><a href="#Error-handling-undo-after-abnormal-execution" class="headerlink" title="Error handling (undo after abnormal execution)"></a>Error handling (undo after abnormal execution)</h3><h4 id="When-executing-such-commands-be-careful-since-not-all-the-undo-operations-can-be-undoed-again"><a href="#When-executing-such-commands-be-careful-since-not-all-the-undo-operations-can-be-undoed-again" class="headerlink" title="When executing such commands, be careful since not all the undo operations can be undoed again"></a>When executing such commands, be careful since not all the undo operations can be undoed again</h4><p>It is quite annoying that sometimes you do the wrong operation and your local development branch becomes messy. Even worse your changes have been pushed to remote branch. The worst is your changes have been merged into mainline (If you wanna change something, it may pollute others’ work). </p><h4 id="git-commit-1"><a href="#git-commit-1" class="headerlink" title="git commit"></a>git commit</h4><ul><li><code>--amend</code>: undo the last commit, can add forgotten file or modify commit message </li></ul><h4 id="git-reset-this-could-be-a-dangerous-command-with-some-arguments-like-hard-since-you-probably-lose-your-work"><a href="#git-reset-this-could-be-a-dangerous-command-with-some-arguments-like-hard-since-you-probably-lose-your-work" class="headerlink" title="git reset (this could be a dangerous command with some arguments like --hard since you probably lose your work)"></a>git reset (this could be a dangerous command with some arguments like <code>--hard</code> since you probably lose your work)</h4><ul><li><code>HEAD &lt;file-name&gt;</code>: unstage a staged file </li><li><code>--soft &lt;commit-hash&gt;</code>: change head pointer and put previous changes into staged area</li><li><code>--mixed &lt;commit-hash&gt;</code>: the default mode, change head pointer and put previous changes into unstaged area</li><li><code>--hard &lt;commit-hash&gt;</code>: change head pointer and remove all the uncommitted changes </li></ul><p>For <code>git reset</code> details, can refer to this <a href="https://stackoverflow.com/questions/3528245/whats-the-difference-between-git-reset-mixed-soft-and-hard" target="_blank" rel="noopener">question</a> for further understanding. </p><h4 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h4><ul><li><code>&lt;commit-hash&gt;</code>: revert a commit and generate a commit about this reverting operation </li></ul><h4 id="git-checkout-1"><a href="#git-checkout-1" class="headerlink" title="git checkout"></a>git checkout</h4><ul><li><code>-- &lt;file-name&gt; / &lt;file-name&gt;</code>: discard changes that you made to the file &lt;== could be dangerous</li></ul><h3 id="Work-with-remotes-Fetching-and-Uploading"><a href="#Work-with-remotes-Fetching-and-Uploading" class="headerlink" title="Work with remotes (Fetching and Uploading)"></a>Work with remotes (Fetching and Uploading)</h3><h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><ul><li>no arguments: clone all the content in remote and add remote branch implicitly</li><li><code>-o &lt;remote-name&gt;</code>: default remote name is <code>origin</code>, can change to other names during clone process</li></ul><h4 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h4><ul><li>no arguments: check upstreaming branch </li><li><code>-v</code>: show full url of upstreaming branch(push and pull)</li><li><code>add &lt;short-name&gt; &lt;url&gt;</code>: add upstreaming branch explicitly </li><li><code>rename &lt;old-remote-name&gt; &lt;new-remote-name&gt;</code></li><li><code>remove &lt;short-name&gt;</code>: delete remote reference, all remote branches are also deleted </li><li><code>show origin</code>: remote branches</li></ul><h4 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h4><ul><li>no arguments: fetch all the changes on the server, this command will not modify anything in local, just be ready for you to operate</li><li><code>&lt;remote-name&gt;</code>: fetch all info from remote, for example, <code>git fetch origin</code></li></ul><h4 id="git-pull-git-fetch-git-merge-from-upstreaming-branch"><a href="#git-pull-git-fetch-git-merge-from-upstreaming-branch" class="headerlink" title="git pull == git fetch + git merge from upstreaming branch"></a>git pull == git fetch + git merge from upstreaming branch</h4><ul><li>no arguments: fetch commits in upstreaming branch and merge into local branch </li><li><code>--rebase</code>: == <code>git fetch</code> + <code>git rebase</code> in this case </li></ul><h4 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h4><ul><li>no arguments: push to the default remote branch </li><li><code>&lt;remote-name&gt; &lt;branch-name&gt;</code>: push to remote branch if local branch name and remote branch name are the same</li><li><code>&lt;remote-name&gt; &lt;local-branch-name&gt;:&lt;remote-branch-name&gt;</code>: push to remote branch if local branch name and remote branch name are different </li><li><code>&lt;remote-name&gt; --delete &lt;remote-branch-name&gt;</code>: delete remote branch, remove pointer from server</li><li><code>--force</code>: rewrite upstreaming branch history according to local history</li></ul><h4 id="git-checkout-2"><a href="#git-checkout-2" class="headerlink" title="git checkout"></a>git checkout</h4><ul><li><code>-b &lt;local-branch-name&gt;</code>: create a new branch and switch to it == git branch <branch-name> + git checkout <branch-name></li><li><code>-b &lt;local-branch-name&gt; &lt;remote-name&gt;/&lt;remote-branch-name&gt;</code>: create a local branch that sync with remote branch <remote-branch-name></li><li><code>--track &lt;remote-name&gt;/&lt;remote-branch-name&gt;</code>: set up current local branch to track remote branch with branch name <remote-branch-name></li></ul><p><br><br><code>git merge</code> and <code>git rebase</code> are two ways to integrate changes from other branches or local to current branch while <code>rebase</code> maintains a cleaner history. However, it is dangerous to use <code>git rebase</code> blindly without fully understand the effect of this command.<br>According to Git book, </p><blockquote><p>Do not rebase commits that exist outside your repository and people may have based work on them.</p></blockquote><p>Rebasing changes the commit history and if other people already merged the older version of commit history and you push newer version, it will become messy. </p><h4 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h4><ul><li><code>&lt;branch-name&gt;</code>: merge another branch into current branch<ul><li>fast-forward: fast-forward simply means move the HEAD pointer forward, Git regards it as a linear history, no diverging and merging required </li></ul></li><li><code>--no-ff &lt;branch-name&gt;</code>: merge without fast forward, will always generate a merge commit even if it is fast forward merge </li></ul><h4 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h4><ul><li><code>&lt;branch-name&gt;</code>: copy commits and merge another branch into current branch, can rebase on top of force-pushed rebase work</li><li><code>&lt;branch-a-name&gt; &lt;branch-b-name&gt;</code>: make <code>branch-b</code> replay changes in <code>branch-a</code> </li><li><code>--onto &lt;branch-a-name&gt; &lt;branch-b-name&gt; &lt;branch-c-name&gt;</code>: take commits from <code>branch-c</code> diverged from <code>branch-b</code> and apply direcly to <code>branch-a</code> (a bit tricky, I don’t like this command)</li></ul><p>Usually public branches use <code>git merge</code> while personal branch use <code>git rebase</code>. Rebase will make commit history cleaner by rewriting the whole commit history. However, it will pollute other people’s history if you rebase + push. merge will leave a merge commit in the history. </p><p>For public branch that someone already rebased his/her commits into it and we already pulled before, use <code>git rebase</code> to merge remote branch code into your branch rather than <code>git merge</code> to avoid duplicate commits. </p><h4 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h4><ul><li>no arguments: list all the local branches </li><li><code>-r</code>: list all the remote branches </li><li><code>-d &lt;branch-name&gt;</code>: delete branch </li><li><code>-D &lt;branch-name&gt;</code>: force delete branch (may lose changes that haven’t commited into stable branches)</li><li><code>-v</code>: see the last commit of each local branch </li><li><code>-vv</code>: list all local branches with tracking branch and <code>head</code> pointer info</li><li><code>--no-merged</code>: see the branches that contain unmerged commits </li><li><code>-u / --set-upstream</code>: set upsteam branch </li></ul><h2 id="Git-branching"><a href="#Git-branching" class="headerlink" title="Git branching"></a>Git branching</h2><p>According to Git Book </p><blockquote><p>Branching means you diverge from the main line of development and continue to do work without messing with that main line. </p></blockquote><p>The statement from Git Book states the core concept of branching, which is to take care of personal development while still maintain the easy-to-merge connection with main line. The core of <code>Git branching</code> is actually diverge and merge. To find a way to diverge and merge conveniently and lightly, Linus Trovalds use concept of pointers to make it work. </p><p>alias of git</p><h2 id="Git-implementation"><a href="#Git-implementation" class="headerlink" title="Git implementation"></a>Git implementation</h2><p>Git stores its data as a sequence of snapchats of the whole filesystem. It does not copy the whole files but stores the reference of each file whenever user commits something. So the whole git history is like a stream of snapshots. </p><p>There are three types of files in git file system, <code>commit</code>, <code>tree</code> and <code>blob</code>. <code>Branch</code> is actually a pointer to different commits and moving the HEAD of each branch is actually changing the position of pointer, which is relatively lightweight and convenient compared to other VCS. <code>branch</code> is a file that contains the 40 character SHA-1 checksum of the commit that it points to. </p><p><code>fast-forward</code> is a concept that applys when integrating changes. Simply treat it as linear merge, do diverging between branches. </p><p>// When git communicate between local repo and remote repo(GitHub or Gitlab), there are two protocols that it can use. <code>https</code> and <code>ssh</code>. </p><p>There are 4 protocols used to transfer data. <code>Local</code>, <code>http</code>, <code>ssh</code> and <code>Git</code>. </p><p>One more thing: Comparison of Gitlab and GitHub </p><p>If you got any questions, feel free to contact me via any communication tools </p><p>Reference: </p><ol><li><a href="https://git-scm.com/book/en/v2" target="_blank" rel="noopener">Git book</a></li><li><a href="https://www.atlassian.com/git/tutorials" target="_blank" rel="noopener">Atlassian Git tutorial</a></li><li><a href="https://git-scm.com/docs" target="_blank" rel="noopener">Git full reference</a></li><li><a href="https://stackoverflow.com/questions/3528245/whats-the-difference-between-git-reset-mixed-soft-and-hard" target="_blank" rel="noopener">Stackoverflow git reset question</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;首篇blog献给我最最最喜欢的小梁！&quot;&gt;&lt;a href=&quot;#首篇blog献给我最最最喜欢的小梁！&quot; class=&quot;headerlink&quot; title=&quot;首篇blog献给我最最最喜欢的小梁！&quot;&gt;&lt;/a&gt;首篇blog献给我最最最喜欢的小梁！&lt;/h3&gt;&lt;p&gt;&lt;br&gt;&lt;/
      
    
    </summary>
    
    
      <category term="DevOps" scheme="http://yoursite.com/categories/DevOps/"/>
    
    
      <category term="misc" scheme="http://yoursite.com/tags/misc/"/>
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>🆕Hello World</title>
    <link href="http://yoursite.com/2019/10/31/actual-hello-world/"/>
    <id>http://yoursite.com/2019/10/31/actual-hello-world/</id>
    <published>2019-10-30T17:11:00.000Z</published>
    <updated>2019-11-03T16:17:03.987Z</updated>
    
    <content type="html"><![CDATA[<p>写在十月的最后一天<br>希望自己可以坚持这个习惯 毕竟是进步（加薪）的不充分不必要条件（笑）<br>然而还是要认真一点的<br>毕竟自己是微博194粉的大V<br>下一篇blog，tech博主正式起航！</p><p>2019.10.31</p><p>最后夹带一点私货，anxl</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;写在十月的最后一天&lt;br&gt;希望自己可以坚持这个习惯 毕竟是进步（加薪）的不充分不必要条件（笑）&lt;br&gt;然而还是要认真一点的&lt;br&gt;毕竟自己是微博194粉的大V&lt;br&gt;下一篇blog，tech博主正式起航！&lt;/p&gt;
&lt;p&gt;2019.10.31&lt;/p&gt;
&lt;p&gt;最后夹带一点私货，
      
    
    </summary>
    
    
      <category term="daily" scheme="http://yoursite.com/categories/daily/"/>
    
    
      <category term="misc" scheme="http://yoursite.com/tags/misc/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/10/29/hello-world/"/>
    <id>http://yoursite.com/2019/10/29/hello-world/</id>
    <published>2019-10-28T17:17:44.952Z</published>
    <updated>2019-10-28T17:17:44.952Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
